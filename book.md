# Hi6 로봇제어기 기능설명서 - 부가축


본 제품 설명서에서 제공되는 정보는 현대로보틱스의 자산입니다.

현대로보틱스의 서면에 의한 동의 없이 전부 또는 일부를 무단 전재 및 재배포할 수 없으며, 제3자에게 제공되거나 다른 목적에 사용할 수 없습니다.



본 설명서는 사전 예고 없이 변경될 수 있습니다.

<br>
<br>
<br>
<br>

**Copyright ⓒ 2022 by Hyundai Robotics**
# 1. 개요
로봇 기본축 이외에 추가된 부가축의 등록방법에 대하여 설명합니다. 
  
  
<br>

**【 등록절차 】**

>* 준비작업  
>(1) 본체(로봇 + 부가축) , 와이어하니스 준비  
>(2) 제어기, BD640 1set(3축이상의 부가축 적용시), 부가축 AMP, 각종 신호용 케이블 준비  
>(3) 부가축 정수  
부가축의 축사양 및 구성, 감속비, 모터, AMP 등의 입력 데이터를 부가축 정수 등록형식(3.2항)에 맞추어 준비 해 놓습니다.  
(4)	부가축 가감속시간  
부가축 지령 가감속시간을 입력(3.2항)하기 위한 데이터를 준비해 놓습니다.  

>*	로봇타입 및 부가축 정수 파라미터 등록  
본체와 제어기간의 와이어하니스를 접속한 후에 시스템 초기화를 하고 로봇타입을선택하고 부가축수를 입력한후 부가축정수를 입력합니다.( 최대 제어축수, 로봇 포함 총 16축)  
※ 로봇타입과 부가축 정수 파라미터를 등록하여 출하된 경우에는 상기 작업을 실행하지 않습니다.  

>*	접속 및 점검  
제어기 전원 Off → 본체, 제어기에 필요한 와이어를 접속 → 제어기 전원 On → 엔코더 보정, 서보건은 기준위치(축정수) 설정을 진행합니다.  

>* 종료  
부가축 동작환경을 설정한 후 외부기억장치( USB memory ) 로 hi6_proj.json 파일을 저장합니다.
# 2\. 준비작업

* 접속할 부품 및 자재들을 확인합니다.
* 미리 계산해 둔 데이터나 선정된 부가축 정보 등이 준비되었는지 확인합니다.
(감속비, AMP 사양, Motot 사양, 최고속, 가속시간 등)
* 축수에 따른 BD640와 AMP의 조합은 다음과 같습니다.

  | 축 구성 | BD/AMP 구성 |
  | :------------------: | :-------------------: |
    | 1축 \~ 6축</br>(기본6축) | BD640 1개</br>6축 AMP 1개 |
  | 7축 \~ 8축</br>(기본6축 + 부가2축) | BD640 1개</br>6축 AMP 1개</br>1축 AMP 1~2개 |
  | 9축 ~ 12축</br>(기본6축 + 부가6축) | BD640 2개</br>6축 AMP 2개 |
  | 13축 ~ 16축</br>(기본6축 + 부가12축) | BD640 2개</br>6축 AMP 2개</br>1축 AMP 1~4개 |


   ※ BD640 1 대당 8축 제어 가능, AMP 2종 (6축용, 1축용)
# 3. 로봇타입 및 부가축 정수 등록

## 3.1 로봇타입 및 부가축수 설정

(1) 수동모드의 『시스템』 → 『5: 초기화』 → 『2: 로봇타입선택』 메뉴에서 사용하고자 하는 로봇타입을 선택합니다.  

<p align="center">
 <img src="../../_assets/robottype.PNG" width="70%"></img>
 <em><p align="center">그림 3.1 로봇 타입 선택 화면</p></em>
</p>

</br>

{% hint style="info" %}
\[주의\] 로봇타입 및 부가축 정수를 설정하기 위해서는 엔지니어코드(R314)가 입력된 상태에서만 가능합니다. 모니터 화면 상단 우측의 “e” 표시가 엔지니어 코드가 입력된 상태임을 보여줍니다.  
{% endhint %}

(2) 부가축수를 입력하고 『확인』키를 눌러서 제어기를 재부팅합니다.

<p align="center">
 <img src="../../_assets/reboot.PNG" width="70%"></img>
 <em><p align="center">그림 3.2 제어기 재부팅 안내</p></em>
</p>

</br>

(3) 『시스템』 → 『5: 초기화』 → 『[5: 부가축 파라미터 설정](../2-parameters/parameters.md)』 메뉴로 진입합니다. 

<p align="center">
 <img src="../../_assets/addaxes_menu.PNG" width="70%"></img>
 <em><p align="center">그림 3.3 부가축 파라미터 설정 메뉴</p></em>
</p>
## 3.2 부가축 정수 설정


(1)	아래와 같은 『부가축 정수 설정』화면을 확인합니다.


<p align="center">
 <img src="../../_assets/addaxes.PNG" width="70%"></img>
 <em><p align="center">그림 3.4 부가축 파라미터 설정</p></em>
</p>


(2)	부가축 정수를 설정합니다.  
(3)	입력 종료는 『OK』키를 누릅니다. 


<br/>

---

**【부가축 정수】**

(1)	축 사양 : 부가축 종류를 <베이스, 서보건, 포지셔너, 지그, 서보핸드> 중에서 선택합니다.  
부가축 사양을 결정할때는 논리적인 부가축 순서에 따라 베이스 → 서보건 → 포지셔너 → 지그 → 서보핸드 순을 지켜야합니다.  

(2)	축 구성 : 축의 동작형태와 방향을 선택합니다.  
직동 베이스축(주행축)인 경우는 전/후축 주행이면 <X>, 좌/우축 주행이면 <Y>로, 상/하축 주행이면 <Z>로 선택합니다. 베이스축이 로봇 좌표계와 동일한 방향으로 설치되지 않은 경우는 <임의>로 선택하고 『베이스축 캘리브레이션』을 실행합니다. 회전 베이스축도 직동 베이스축과 같이 Rx/Ry/Rz를 선택하거나 <임의>로 선택하여 『베이스축 캘리브레이션』을 실행합니다. 서보건을 설정하는 경우는 『서보건기능 설명서』, 포지셔너를 사용하는 경우는 『포지셔너동기 기능설명서』를 참조하십시오.

(3)	축 위치 : 부가축의 물리적인 구성을 사용자가 지정하여 사용할수 있도록 합니다.

<center>

|축위치 정보 |설정값 |
|:---:|:---:|
| BD : '1'  | BD640보드 번호 : 1~2  |
| Axis : '7' | BD640 #1 : 7~8 </br>BD640 #2 : 1~8  |

  ※ '1', '7' 로 설정하였다면, BD640 1번의 7번째 축으로 설정됨  
</center>

(4) 감속비 : 모터 회전수당 축의 이동량을 등록합니다.  
직동축은 모터 회전수당 축 이동거리를 mm로, 회전축은 모터 회전수당 축 회전각도를 deg로 등록합니다. 부호는 모터의 정방향(엔코더가 증가하는 방향)이 축 동작방향과 일치하여 부가축 좌표치가 증가하면 “+”이고, 반대로 좌표치가 감소한다면 “-“로 정합니다. 아래 예시를 참고하십시오.  

- 예 1) 1/100감속기만 사용하는 회전축이라면,  
모터 100회전에 축이 360deg회전하므로,  
감속비 = + 360 / 100 [deg/rev]  
- 예 2) 1/20감속기와 PCD 110mm인 랙피니언을 사용하는 직동축이라면,  
모터 20회전에 110xPhi(=3.14159)=345.5749[mm]를 이동하므로,  
감속비 = + 3455749 /200000 [mm/rev]  
- 예 3) 1/5 감속기와 Lead 5mm인 볼스크류를 사용하는 직동축이라면,  
모터 5회전에 축이 5mm이동하므로,  
감속비 = + 5 / 5 [mm/rev]  

(5)	소프트리밋 : 로봇 유효동작영역(부가축 소프트 리미트)을 설정합니다.
직동축은 [mm]로 회전축은 [deg]로 설정하면 『시스템』 → 『3: 로봇 파라미터』 → 『3: 소프트웨어 리미트』에 설정값이 반영됩니다.  

(6)	AMP 사양 : 부가축에 사용할 AMP의 사양을 선택합니다.  
IPM 기호를 선택하고 Hall Sensor 사양을 숫자 0-9 로 입력하여 AMP 사양을 선택합니다. AMP의 형식 사양은 다음과 같습니다.  


<p align="center">
 <img src="../../_assets/amp.PNG" width="70%"></img>
 <em><p align="center">그림 3.5 IPM 사양</p></em>
</p>

IPM 기호와 Hall Sensor 기호에 따라 아래의 정격 용량을 갖습니다.  


<p align="center">
 <img src="../../_assets/ipm_hall.PNG" width="70%"></img>
 <em><p align="center">그림 3.6 Hall sensor 사양</p></em>
</p>

(7)	Motor 사양 : 부가축에 사용되는 모터 사양을 선택합니다.  
모터의 용량을 먼저 선택하고, 모터 사양을 선택합니다.  

(8)	가감속 파라미터 : 부가축의 최고속과 가속시간을 설정합니다.  
여기서 설정한 값은 『시스템』 → 『3: 로봇 파라미터』 → 『34: 가감속 파라미터』에 설정하는 것과 동일하게 적용됩니다. 부가축의 최고속을 사용자가 지정하지만, 모터 정격속도에 따라 제한됩니다. 부가축 동작중 진동이 발생하면 가속시간을 조정해야 합니다.  
## 3.3 메카니즘 설정

(1)	메커니즘 설정  
『시스템』 → 『5: 초기화』 → 『6: 메커니즘 설정』을 선택합니다.  

<p align="center">
 <img src="../../_assets/mechanism.PNG" width="70%"></img>
 <em><p align="center">그림 3.7 메커니즘 설정</p></em>
</p>


부가축은 수동 조작시 메커니즘 그룹에 따라 조그키를 할당하기 위해 메커니즘 그룹을 설정해야 합니다. 로봇축은 메커니즘 M0으로 고정되어 있으며, 부가축은 메커니즘 M1~M7로 분류하여 선택합니다.  


<br/>

(2)	정수 파일 백업  
부가축 설정이 완료되고 나면 『서비스』 → 『5: 파일관리』에서 USB memory에 프로젝트 파일(hi6_proj.json)을 복사합니다.  

<p align="center">
 <img src="../../_assets/project.PNG" width="70%"></img>
 <em><p align="center">그림 3.8 설정 파일 백업</p></em>
</p># 4. 티칭 & 재생## 4.1 수동조작(조그)


(1)	T/P상의 [메커니즘]키를 누르면 T/P상단의 상태표시창의 메커니즘 상태가 [1]로 표시되면서 메커니즘 그룹 1번에 대한 수동 조작이 가능해집니다.

(2)	부가축 수동조작은 좌표계에 관계없이 개별축 동작을 합니다. 다만, 주행축 은 좌표계 선택에 따라 다음과 같이 동작합니다.  
- 축, 직교 : 주행축 개별동작(설정된 축 방향으로 이동)  
- 툴 : 로봇 툴끝(TCP) 위치고정 동작(위치고정, 자세변환)  

(3)	수동동작 속도( S8기준 ) : 부가축 최고속의 25% (단, 직선최고속 250mm/sec로 제한)  
## 4.2 재생

(1)	보간 Off
각축별 목표점 동시 도달 합니다.

(2)	직선보간
로봇 툴끝(TCP)이 직선보간(궤적,자세유지) 동작이 이루어 집니다.
베이스축은 로봇과 연동하여 움직이면서 툴끝이 직선보간을 이루도록합니다.
그 이외의 부가축은 로봇 툴끝과 관련이 없으나 목표점에 동시 도달합니다.

(3)	원호보간
로봇 툴끝(TCP)이 직선보간(궤적,자세유지) 동작이 이루어 집니다.
베이스축은 로봇과 연동하여 움직이면서 툴끝이 직선보간을 이루도록합니다.
그 이외의 부가축은 로봇 툴끝과 관련이 없으나 목표점에 동시 도달합니다.

(4)	쉬프트
쉬프트 기능은(오프라인, 온라인, 서치, 팔레타이즈) 기본적으로 로봇에 대해서 적용되고 부가축은 기록된 위치까지만 이동합니다. 특히 서치기능에서 서치동작 스텝에는 부가축 이동이 없도록 주의하십시오. 주행축 쉬프트가 필요한 경우에는 Base 좌표계에서 쉬프트 합니다.

(5)	좌표변환
로봇에 대한 이동 성분만을 변환하고 부가축의 목표치는 동일값으로 옮겨놓기 때문에 변환할 원본 프로그램에 부가축 이동량이 없도록 검토 바랍니다.

(6)	상대 프로그램 호출기능 적용
상대 프로그램 작성시는 부가축을 이동하면 안됩니다. 로봇에 대한 상대위치만을 적용합니다.  